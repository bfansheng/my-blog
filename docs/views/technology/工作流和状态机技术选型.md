---
title: 工作流和状态机技术选型
date: 2021-01-17
categories: 
 - Technology
tags: 
 - Workflow
 - State Machine
---

## 状态机

优点：

1. 灵活，由事件/动作驱动，不需要严格按照顺序执行。

缺点：

1. 需要记录和依赖任务当前状态，如果状态多，需要维护各个状态间的转化的也会变多。
2. 变动状态(增加状态，或者增加子状态)，需要相应调整代码，随着业务复杂化（这实际上是不可避免的过程），系统会变得难以维护。
3. 可读性差，随着状态数增加，可读性也不断减少。
4. 如果想要指定各状态处理人，需要通过硬编码或者增加配置表。
5. 不能查看历史步骤及流程流转情况
6. 难以处理多人会签、并行任务等复杂逻辑。

## 工作流

优点：

1. 容易理解，有对应的流程图，方便需求和开发人沟通以及后续的维护等。
2. 可灵活指定各节点处理人。
3. 可灵活增加简单（无特殊业务）的审批节点而无需改动代码。
4. 有详细的历史步骤及流程流转情况

缺点：

1. 不够灵活，只有上一步完成才能执行下一步。
2. 国内对流程业务有许多特色要求：单人办理、多人顺序、多人并行、抢占式办理、内部循环、人工合并，主办加签、会办加签、补签意见、异步提交、指定回退、自由指派、节点排序、节点互斥、子流程单实例等等。**工作流的引入可能有利于解决这些问题，也有可能由于框架限制或技术熟练度等原因导致无法实现或难以实现的困境。**

## 结论

如果您的系统不是很复杂，状态机是一个很好的解决方案。如果你**能够绘制所有可能的状态以及将导致转换到它们的事件**，则可以实现它。一般来说，状态机在网络协议或某些嵌入式系统中都能很好地工作。

工作流引擎实现是管理业务流程的一种很好的方法。它是任务分配、CRM等复杂系统的正确解决方案。总之，其最终目标是提高业务流程和公司效率。这就是为什么它非常适合于业务流程自动化。

## 参考

1. [WORKFLOW ENGINE VS. STATE MACHINE](https://workflowengine.cn.com/blog/workflow-engine-vs-state-machine/)
2. [状态控制 VS 流程控制](https://blog.csdn.net/weixin_34007020/article/details/86074176?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&spm=1001.2101.3001.4242)